apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: ingress-nginx
  namespace: ingress-nginx
spec:
  releaseName: ingress-nginx
  chart:
    spec:
      chart: ingress-nginx
      version: latest
  values:
   controller:
    image:
        registry: ghcr.io
        image: ingress-nginx/controller
    service:
      loadBalancerIP: 10.12.2.250
      externalTrafficPolicy: Local
      annotations:
        service.beta.kubernetes.io/azure-load-balancer-internal: "true"
    config:
      proxy-body-size: "0"
    nodeSelector:
        kubernetes.azure.com/mode: user
    tolerations:
    - key: "mode"
      operator: "Equal"
      value: "system"
      effect: "NoSchedule"
    